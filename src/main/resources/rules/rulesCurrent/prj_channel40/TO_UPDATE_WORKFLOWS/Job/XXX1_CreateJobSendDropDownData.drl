package life.genny.rules;

import life.genny.rules.QRules;
import life.genny.qwanda.entity.BaseEntity;

import io.vertx.core.json.JsonObject;

rule "Send DropDown Datas"
   agenda-group "CreateLoad"
   no-loop true
   when
     rules: QRules()
   then
    rules.header();

     String userCode =  rules.getUser().getCode();
     System.out.println("The user Code is  ::  " +userCode);

   /* Get the users Company Code  */
    BaseEntity company =  rules.baseEntity.getParent(userCode,"LNK_STAFF");
    System.out.println("The users company code is  ::   " +company.getCode());

   /*      Getting list of loads      */
     if(company != null){
        rules.sendSelectionsWithLinkValue("GRP_LOADS", "LNK_LOAD", company.getCode(), 100);
     }

   /*   Getting list of the load category   */
    rules.sendSelections("GRP_LOAD_CATEGORY", "LNK_CORE", 20);

 	rules.footer();

end
