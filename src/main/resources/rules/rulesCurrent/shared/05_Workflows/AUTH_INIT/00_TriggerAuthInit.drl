package life.genny.rules;
import life.genny.rules.QRules;

rule "Auth Init"
    when
        rules: QRules( 	isState("AUTH_INIT") && !isState("LOOP_AUTH_INIT_EVT") )
     then
        rules.setDrools(drools);

        rules.header();
        rules.setState("LOOP_AUTH_INIT_EVT");

        rules.getUser();

        if(rules.isUserPresent() == true) {

            rules.getUser();
            rules.setState("USER_IS_READY"); /* this starts application workflow */
        }
        else {
            rules.setState("USER_IS_NOT_READY");
        }
	    rules.footer();
end
