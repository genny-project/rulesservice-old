package life.genny.rules;

import life.genny.rules.QRules;
import life.genny.qwanda.entity.BaseEntity;

import life.genny.qwanda.message.QEventMessage;

rule "Auth Init"

    when
        m : QEventMessage( "AUTH_INIT" == data.code  )
        rules: QRules( isState("STARTED") && 
                      !isState("USER_CHECKED"))
     then     
     	rules.header();
        BaseEntity user = rules.getUser();
        if(user == null ){
            rules.setState("USER_NOT_CHECKED");
        }else{
            rules.setState("USER_CHECKED");
        }
	    rules.footer();       		      
end
