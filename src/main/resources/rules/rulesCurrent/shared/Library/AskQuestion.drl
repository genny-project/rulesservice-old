package life.genny.rules;
import life.genny.rules.QRules;

rule "Ask Question"
	when
	    rules: QRules(  isState("ASK_QUESTION") &&
                        !isState("ASKED_QUESTION") )
	 then 	
        rules.header();
 		rules.setState("ASKED_QUESTION");

        String sourceCode = rules.getAsString("sourceCode");
        String targetCode = rules.getAsString("targetCode");
        String questionGroup = rules.getAsString("questionGroup");
        Boolean isPopup = rules.getAsBoolean("isPopup");
 		
 		if(sourceCode == null) {
             rules.println("Ask Question: missing source code");
        }
        else if(targetCode == null) {
            rules.println("Ask Question: missing target code");
        }
        else if(questionGroup == null) {
            rules.println("Ask Question: missing questionGroup code");
        }
        else {
            rules.askQuestions(sourceCode, targetCode, questionGroup, false, isPopup);
        }

	 	rules.footer();      
end
